# è®¢å•ç®¡ç†ä¸ä¾›åº”å•†é›†æˆç³»ç»Ÿ - è¯¦ç»†è®¾è®¡æ–¹æ¡ˆ

**ä½œè€…ï¼š** MiniMax Agent  
**æ—¥æœŸï¼š** 2025-07-17

## ç³»ç»Ÿæ¦‚è¿°

æœ¬æ–¹æ¡ˆè®¾è®¡äº†ä¸€ä¸ªæ·±åº¦é›†æˆçš„è®¢å•ç®¡ç†ä¸ä¾›åº”å•†ç³»ç»Ÿï¼Œå®ç°å¤šä¾›åº”å•†ä»·æ ¼å¯¹æ¯”ã€æ™ºèƒ½é‡‡è´­å†³ç­–ã€åŠ¨æ€æŠ¥ä»·ã€ä¾›åº”å•†åä½œç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œç¡®ä¿ç»´ä¿®è®¢å•ä¸ä¾›åº”å•†é‡‡è´­çš„æ— ç¼è¿æ¥ã€‚

## ğŸ”„ é›†æˆæ¶æ„è®¾è®¡

### ç³»ç»Ÿé›†æˆæ¨¡å‹
```mermaid
graph TD
    A[ç»´ä¿®è®¢å•] --> B[é…ä»¶éœ€æ±‚åˆ†æ]
    B --> C[ä¾›åº”å•†è¯¢ä»·ç³»ç»Ÿ]
    C --> D[å¤šä¾›åº”å•†æ¯”ä»·]
    D --> E[æ™ºèƒ½é‡‡è´­å†³ç­–]
    E --> F[é‡‡è´­è®¢å•ç”Ÿæˆ]
    F --> G[ä¾›åº”å•†åä½œå¹³å°]
    G --> H[äº¤ä»˜è·Ÿè¸ª]
    H --> I[åº“å­˜æ›´æ–°]
    I --> J[è®¢å•çŠ¶æ€åŒæ­¥]
    J --> A
```

### æ•°æ®æµé›†æˆ
```mermaid
sequenceDiagram
    participant VO as ç»´ä¿®è®¢å•
    participant PM as é…ä»¶ç®¡ç†
    participant SM as ä¾›åº”å•†ç®¡ç†
    participant PS as è¯¢ä»·ç³»ç»Ÿ
    participant PO as é‡‡è´­è®¢å•
    participant INV as åº“å­˜ç³»ç»Ÿ
    
    VO->>PM: é…ä»¶éœ€æ±‚è¯†åˆ«
    PM->>SM: æŸ¥è¯¢ä¾›åº”å•†åˆ—è¡¨
    SM->>PS: å‘èµ·å¤šä¾›åº”å•†è¯¢ä»·
    PS->>SM: æ”¶é›†ä¾›åº”å•†æŠ¥ä»·
    SM->>PS: æ‰§è¡Œä»·æ ¼å¯¹æ¯”åˆ†æ
    PS->>PO: ç”Ÿæˆæœ€ä¼˜é‡‡è´­æ–¹æ¡ˆ
    PO->>SM: å‘é€é‡‡è´­è®¢å•
    SM->>INV: æ›´æ–°é¢„è®¡åº“å­˜
    INV->>VO: æ›´æ–°é…ä»¶å¯ç”¨æ€§
```

## ğŸ“Š æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. æ™ºèƒ½ä¾›åº”å•†åŒ¹é…ç³»ç»Ÿ

#### 1.1 é…ä»¶éœ€æ±‚æ™ºèƒ½è¯†åˆ«
```typescript
interface PartRequirementAnalysis {
  orderId: string;
  deviceInfo: {
    brand: string;
    model: string;
    issueType: string;
  };
  
  requiredParts: Array<{
    partId: string;
    partName: string;
    partNumber: string;
    category: string;
    specification: Record<string, any>;
    quantity: number;
    urgency: 'low' | 'normal' | 'high' | 'critical';
    qualityRequirement: 'original' | 'oem' | 'aftermarket' | 'any';
    maxAcceptablePrice: number;
    preferredBrands: string[];
    compatibleAlternatives: string[];
  }>;
  
  deliveryRequirements: {
    requiredBy: Date;
    deliveryAddress: string;
    preferredSuppliers: string[];
    excludedSuppliers: string[];
    maxLeadTime: number; // å¤©æ•°
  };
  
  budgetConstraints: {
    maxTotalBudget: number;
    preferredPriceRange: {
      min: number;
      max: number;
    };
    discountExpectation: number;
  };
}
```

#### 1.2 ä¾›åº”å•†æ™ºèƒ½åŒ¹é…ç®—æ³•
```typescript
interface SupplierMatchingCriteria {
  // é…ä»¶åŒ¹é…åº¦
  partCompatibility: {
    hasExactMatch: boolean;
    hasCompatibleAlternative: boolean;
    qualityGrade: number; // 1-10
    brandAlignment: number; // 1-10
  };
  
  // ä¾›åº”å•†èƒ½åŠ›è¯„ä¼°
  supplierCapability: {
    deliveryCapability: number; // 1-10
    qualityHistory: number; // 1-10
    priceCompetitiveness: number; // 1-10
    serviceLevel: number; // 1-10
    reliability: number; // 1-10
  };
  
  // å†å²åˆä½œè¡¨ç°
  historicalPerformance: {
    onTimeDeliveryRate: number;
    qualityDefectRate: number;
    priceStability: number;
    communicationEffectiveness: number;
    problemResolutionSpeed: number;
  };
  
  // å•†åŠ¡æ¡ä»¶
  businessTerms: {
    paymentTerms: string;
    minimumOrderValue: number;
    bulkDiscountAvailable: boolean;
    returnPolicy: string;
    warrantyOffered: number; // æœˆæ•°
  };
  
  // ç»¼åˆåŒ¹é…å¾—åˆ†
  overallScore: number; // 1-100
  recommendationLevel: 'highly_recommended' | 'recommended' | 'acceptable' | 'not_recommended';
}
```

### 2. å¤šä¾›åº”å•†è¯¢ä»·ç³»ç»Ÿ

#### 2.1 è‡ªåŠ¨åŒ–è¯¢ä»·æµç¨‹
```typescript
interface RFQRequest {
  rfqId: string;
  orderId: string;
  createdBy: string;
  
  // è¯¢ä»·åŸºç¡€ä¿¡æ¯
  basicInfo: {
    title: string;
    description: string;
    rfqNumber: string;
    issueDate: Date;
    responseDeadline: Date;
    validityPeriod: number; // å¤©æ•°
  };
  
  // é…ä»¶è¯¦æƒ…
  items: Array<{
    itemId: string;
    partName: string;
    partNumber: string;
    specification: Record<string, any>;
    quantity: number;
    unitOfMeasure: string;
    qualityRequirement: string;
    alternativesAccepted: boolean;
    urgency: string;
    deliveryDate: Date;
  }>;
  
  // å•†åŠ¡è¦æ±‚
  commercialTerms: {
    paymentTerms: string[];
    deliveryTerms: string;
    warrantyRequirement: number;
    returnPolicy: string;
    priceValidityPeriod: number;
  };
  
  // æŠ€æœ¯è¦æ±‚
  technicalRequirements: {
    certificationRequired: string[];
    testingRequired: boolean;
    packagingRequirements: string;
    documentationRequired: string[];
  };
  
  // ä¾›åº”å•†é€‰æ‹©
  targetSuppliers: Array<{
    supplierId: string;
    invitationMethod: 'email' | 'platform' | 'phone' | 'fax';
    customMessage?: string;
    priority: 'high' | 'medium' | 'low';
  }>;
}

interface RFQResponse {
  responseId: string;
  rfqId: string;
  supplierId: string;
  submittedAt: Date;
  
  // æŠ¥ä»·ä¿¡æ¯
  quotation: {
    items: Array<{
      itemId: string;
      quotedPart: {
        partName: string;
        partNumber: string;
        brand: string;
        origin: string;
        quality: string;
      };
      pricing: {
        unitPrice: number;
        quantity: number;
        totalPrice: number;
        currency: string;
        discounts: Array<{
          type: string;
          condition: string;
          percentage: number;
        }>;
      };
      delivery: {
        leadTime: number;
        deliveryDate: Date;
        shippingCost: number;
        incoterms: string;
      };
      warranty: {
        period: number;
        coverage: string;
        conditions: string;
      };
    }>;
    
    totalValue: number;
    totalShipping: number;
    taxes: number;
    grandTotal: number;
  };
  
  // å•†åŠ¡æ¡æ¬¾
  commercialTerms: {
    paymentTerms: string;
    priceValidityPeriod: number;
    minimumOrderValue: number;
    bulkDiscountThreshold: number;
    returnPolicy: string;
  };
  
  // é™„åŠ ä¿¡æ¯
  additionalInfo: {
    certifications: string[];
    sampleAvailable: boolean;
    customizationPossible: boolean;
    urgentDeliveryOption: boolean;
    technicalSupport: string;
    specialOffers: string;
  };
  
  // çŠ¶æ€è·Ÿè¸ª
  status: 'submitted' | 'under_review' | 'accepted' | 'rejected' | 'negotiating';
  reviewNotes: string;
  attachments: string[];
}
```

#### 2.2 ä»·æ ¼å¯¹æ¯”åˆ†æç³»ç»Ÿ
```typescript
interface SupplierComparison {
  rfqId: string;
  comparisonDate: Date;
  
  // ä»·æ ¼å¯¹æ¯”
  priceComparison: {
    summary: {
      lowestPrice: number;
      highestPrice: number;
      averagePrice: number;
      priceVariance: number;
      recommendedPrice: number;
    };
    
    bySupplier: Array<{
      supplierId: string;
      supplierName: string;
      totalPrice: number;
      priceRank: number;
      priceAdvantage: number; // ç›¸å¯¹äºå¹³å‡ä»·æ ¼çš„ä¼˜åŠ¿ç™¾åˆ†æ¯”
      
      itemBreakdown: Array<{
        itemId: string;
        unitPrice: number;
        quantity: number;
        totalPrice: number;
        competitivePosition: 'lowest' | 'competitive' | 'average' | 'high' | 'highest';
      }>;
    }>;
  };
  
  // äº¤ä»˜å¯¹æ¯”
  deliveryComparison: {
    summary: {
      fastestDelivery: number;
      slowestDelivery: number;
      averageDelivery: number;
    };
    
    bySupplier: Array<{
      supplierId: string;
      supplierName: string;
      leadTime: number;
      deliveryDate: Date;
      deliveryRank: number;
      urgentDeliveryAvailable: boolean;
      shippingCost: number;
    }>;
  };
  
  // è´¨é‡å¯¹æ¯”
  qualityComparison: {
    bySupplier: Array<{
      supplierId: string;
      supplierName: string;
      qualityScore: number;
      certifications: string[];
      warrantyPeriod: number;
      historicalQualityRating: number;
      defectRate: number;
    }>;
  };
  
  // å•†åŠ¡æ¡æ¬¾å¯¹æ¯”
  commercialComparison: {
    bySupplier: Array<{
      supplierId: string;
      supplierName: string;
      paymentTerms: string;
      paymentTermsScore: number; // æœ‰åˆ©ç¨‹åº¦è¯„åˆ†
      minimumOrder: number;
      bulkDiscounts: boolean;
      returnPolicy: string;
      priceValidityPeriod: number;
    }>;
  };
  
  // ç»¼åˆè¯„åˆ†
  overallRanking: Array<{
    rank: number;
    supplierId: string;
    supplierName: string;
    overallScore: number;
    priceScore: number;
    deliveryScore: number;
    qualityScore: number;
    commercialScore: number;
    recommendation: 'strongly_recommended' | 'recommended' | 'acceptable' | 'not_recommended';
    reason: string;
  }>;
}
```

### 3. æ™ºèƒ½é‡‡è´­å†³ç­–å¼•æ“

#### 3.1 å†³ç­–ç®—æ³•é…ç½®
```typescript
interface PurchaseDecisionEngine {
  // å†³ç­–æƒé‡é…ç½®
  decisionWeights: {
    price: number; // ä»·æ ¼æƒé‡ 0-1
    delivery: number; // äº¤ä»˜æƒé‡ 0-1
    quality: number; // è´¨é‡æƒé‡ 0-1
    reliability: number; // å¯é æ€§æƒé‡ 0-1
    service: number; // æœåŠ¡æƒé‡ 0-1
    relationship: number; // åˆä½œå…³ç³»æƒé‡ 0-1
  };
  
  // å†³ç­–è§„åˆ™
  decisionRules: Array<{
    ruleId: string;
    ruleName: string;
    condition: string; // æ¡ä»¶è¡¨è¾¾å¼
    action: string; // æ‰§è¡ŒåŠ¨ä½œ
    priority: number; // ä¼˜å…ˆçº§
    isActive: boolean;
  }>;
  
  // è‡ªåŠ¨å†³ç­–é˜ˆå€¼
  autoDecisionThresholds: {
    maxPriceDifference: number; // æœ€å¤§ä»·æ ¼å·®å¼‚ç™¾åˆ†æ¯”
    minQualityScore: number; // æœ€ä½è´¨é‡åˆ†æ•°
    maxLeadTime: number; // æœ€å¤§äº¤ä»˜æ—¶é—´
    minSupplierRating: number; // æœ€ä½ä¾›åº”å•†è¯„çº§
  };
  
  // é£é™©è¯„ä¼°å‚æ•°
  riskAssessment: {
    supplierConcentrationLimit: number; // å•ä¸€ä¾›åº”å•†ä¾èµ–åº¦é™åˆ¶
    newSupplierRiskWeight: number; // æ–°ä¾›åº”å•†é£é™©æƒé‡
    geographicalRiskWeight: number; // åœ°ç†é£é™©æƒé‡
    financialStabilityWeight: number; // è´¢åŠ¡ç¨³å®šæ€§æƒé‡
  };
}

interface PurchaseRecommendation {
  recommendationId: string;
  rfqId: string;
  generatedAt: Date;
  
  // æ¨èæ–¹æ¡ˆ
  primaryRecommendation: {
    supplierId: string;
    supplierName: string;
    totalValue: number;
    totalDeliveryTime: number;
    overallScore: number;
    confidenceLevel: number; // 0-1
    
    advantages: string[];
    disadvantages: string[];
    risks: string[];
    mitigation: string[];
  };
  
  // å¤‡é€‰æ–¹æ¡ˆ
  alternativeOptions: Array<{
    supplierId: string;
    supplierName: string;
    totalValue: number;
    totalDeliveryTime: number;
    overallScore: number;
    reason: string; // ä¸ºä»€ä¹ˆä½œä¸ºå¤‡é€‰
  }>;
  
  // æ‹†åˆ†é‡‡è´­å»ºè®®ï¼ˆå¦‚æœé€‚ç”¨ï¼‰
  splitPurchaseOption?: {
    reason: string;
    suppliers: Array<{
      supplierId: string;
      supplierName: string;
      items: string[];
      value: number;
      advantage: string;
    }>;
    totalValue: number;
    riskMitigation: string;
  };
  
  // å†³ç­–ä¾æ®
  decisionRationale: {
    keyFactors: string[];
    tradeOffs: string[];
    riskConsiderations: string[];
    businessImpact: string;
  };
  
  // éœ€è¦äººå·¥å®¡æ ¸çš„åŸå› 
  manualReviewRequired?: {
    reasons: string[];
    urgency: 'low' | 'medium' | 'high';
    approvalLevel: 'supervisor' | 'manager' | 'director';
  };
}
```

#### 3.2 é‡‡è´­è®¢å•è‡ªåŠ¨ç”Ÿæˆ
```typescript
interface AutoPurchaseOrder {
  // åŸºç¡€ä¿¡æ¯
  poNumber: string;
  rfqId: string;
  originalOrderId: string; // å…³è”çš„ç»´ä¿®è®¢å•
  supplierId: string;
  createdBy: string;
  approvedBy?: string;
  
  // è®¢å•çŠ¶æ€
  status: 'draft' | 'pending_approval' | 'approved' | 'sent_to_supplier' | 'acknowledged' | 'in_production' | 'shipped' | 'delivered' | 'completed' | 'cancelled';
  
  // ä¾›åº”å•†ä¿¡æ¯
  supplier: {
    name: string;
    contactPerson: string;
    email: string;
    phone: string;
    address: string;
    paymentTerms: string;
  };
  
  // è®¢å•é¡¹ç›®
  items: Array<{
    lineNumber: number;
    partId: string;
    partName: string;
    partNumber: string;
    description: string;
    quantity: number;
    unitPrice: number;
    totalPrice: number;
    
    delivery: {
      requestedDate: Date;
      confirmedDate?: Date;
      actualDate?: Date;
      deliveryAddress: string;
    };
    
    quality: {
      specification: string;
      inspectionRequired: boolean;
      certificationRequired: boolean;
      warrantyPeriod: number;
    };
    
    status: 'pending' | 'confirmed' | 'in_production' | 'shipped' | 'delivered' | 'accepted' | 'rejected';
  }>;
  
  // è´¢åŠ¡ä¿¡æ¯
  financial: {
    subtotal: number;
    shipping: number;
    taxes: number;
    discounts: number;
    total: number;
    currency: string;
    exchangeRate?: number;
  };
  
  // äº¤ä»˜ä¿¡æ¯
  delivery: {
    method: string;
    address: string;
    contact: string;
    instructions: string;
    trackingNumber?: string;
  };
  
  // è´¨é‡è¦æ±‚
  qualityRequirements: {
    inspectionLevel: 'normal' | 'tightened' | 'reduced';
    certificationRequired: string[];
    testingRequired: boolean;
    documentationRequired: string[];
  };
  
  // åˆåŒæ¡æ¬¾
  terms: {
    paymentTerms: string;
    deliveryTerms: string;
    warrantyTerms: string;
    returnPolicy: string;
    penaltyClause: string;
  };
  
  // å®¡æ‰¹æµç¨‹
  approvalWorkflow: Array<{
    step: number;
    approverRole: string;
    approverName?: string;
    status: 'pending' | 'approved' | 'rejected';
    timestamp?: Date;
    comments?: string;
  }>;
}
```

### 4. ä¾›åº”å•†åä½œå¹³å°

#### 4.1 ä¾›åº”å•†é—¨æˆ·ç³»ç»Ÿ
```typescript
interface SupplierPortal {
  // ä¾›åº”å•†åŸºç¡€ä¿¡æ¯
  supplierInfo: {
    companyProfile: {
      companyName: string;
      businessLicense: string;
      taxId: string;
      establishedYear: number;
      employeeCount: number;
      annualRevenue: number;
      certifications: string[];
      mainProducts: string[];
      servingIndustries: string[];
    };
    
    contactInformation: {
      headquarters: AddressInfo;
      salesContact: ContactInfo;
      technicalContact: ContactInfo;
      financialContact: ContactInfo;
      emergencyContact: ContactInfo;
    };
    
    businessCapabilities: {
      productCategories: string[];
      manufacturingCapabilities: string[];
      qualityCertifications: string[];
      deliveryCapabilities: {
        geographicCoverage: string[];
        averageLeadTime: number;
        expressDeliveryAvailable: boolean;
        bulkOrderCapacity: number;
      };
    };
  };
  
  // äº§å“ç›®å½•ç®¡ç†
  productCatalog: {
    categories: Array<{
      categoryId: string;
      categoryName: string;
      subcategories: string[];
    }>;
    
    products: Array<{
      productId: string;
      productName: string;
      productNumber: string;
      category: string;
      brand: string;
      specifications: Record<string, any>;
      compatibility: string[];
      pricing: {
        unitPrice: number;
        minimumOrderQuantity: number;
        bulkPricing: Array<{
          quantity: number;
          price: number;
        }>;
        currency: string;
        priceValidUntil: Date;
      };
      availability: {
        inStock: number;
        leadTime: number;
        productionCapacity: number;
        seasonalAvailability: string;
      };
      qualityInfo: {
        warranty: number;
        certifications: string[];
        qualityGrade: string;
        origin: string;
      };
      media: {
        images: string[];
        documents: string[];
        videos: string[];
      };
    }>;
  };
  
  // è¯¢ä»·ç®¡ç†
  rfqManagement: {
    activeRFQs: Array<{
      rfqId: string;
      title: string;
      issueDate: Date;
      responseDeadline: Date;
      status: 'new' | 'in_progress' | 'submitted' | 'expired';
      items: Array<{
        itemName: string;
        quantity: number;
        specification: string;
      }>;
    }>;
    
    responseHistory: Array<{
      rfqId: string;
      submissionDate: Date;
      status: 'submitted' | 'under_review' | 'accepted' | 'rejected';
      totalValue: number;
      feedback?: string;
    }>;
  };
  
  // è®¢å•ç®¡ç†
  orderManagement: {
    activeOrders: Array<{
      poNumber: string;
      orderDate: Date;
      totalValue: number;
      status: string;
      deliveryDate: Date;
      items: Array<{
        itemName: string;
        quantity: number;
        unitPrice: number;
        status: string;
      }>;
    }>;
    
    orderHistory: Array<{
      poNumber: string;
      orderDate: Date;
      deliveryDate: Date;
      totalValue: number;
      status: 'completed' | 'cancelled';
      performance: {
        onTimeDelivery: boolean;
        qualityRating: number;
        issuesReported: number;
      };
    }>;
  };
  
  // ç»©æ•ˆä»ªè¡¨æ¿
  performanceDashboard: {
    kpis: {
      onTimeDeliveryRate: number;
      qualityRating: number;
      responseTime: number; // è¯¢ä»·å“åº”æ—¶é—´
      orderAcceptanceRate: number;
      customerSatisfaction: number;
    };
    
    trends: {
      monthlyOrderVolume: Array<{
        month: string;
        volume: number;
        value: number;
      }>;
      qualityTrend: Array<{
        month: string;
        rating: number;
      }>;
      deliveryPerformance: Array<{
        month: string;
        onTimeRate: number;
      }>;
    };
    
    rankings: {
      overallRank: number;
      totalSuppliers: number;
      categoryRank: Record<string, number>;
      improvementAreas: string[];
    };
  };
}
```

#### 4.2 å®æ—¶åä½œåŠŸèƒ½
```typescript
interface SupplierCollaboration {
  // å®æ—¶é€šä¿¡
  communication: {
    instantMessaging: {
      conversations: Array<{
        conversationId: string;
        participants: string[];
        topic: string;
        lastMessage: Date;
        unreadCount: number;
      }>;
      
      messageTemplates: Array<{
        templateId: string;
        category: string;
        title: string;
        content: string;
      }>;
    };
    
    videoConferencing: {
      scheduledMeetings: Array<{
        meetingId: string;
        title: string;
        participants: string[];
        scheduledTime: Date;
        agenda: string[];
        meetingLink: string;
      }>;
    };
    
    documentSharing: {
      sharedDocuments: Array<{
        documentId: string;
        fileName: string;
        category: string;
        sharedBy: string;
        sharedDate: Date;
        accessLevel: 'view' | 'edit' | 'comment';
      }>;
    };
  };
  
  // è´¨é‡åä½œ
  qualityCollaboration: {
    qualityAudits: Array<{
      auditId: string;
      auditDate: Date;
      auditType: 'scheduled' | 'random' | 'complaint_based';
      auditor: string;
      findings: Array<{
        category: string;
        description: string;
        severity: 'low' | 'medium' | 'high' | 'critical';
        correctionRequired: boolean;
      }>;
      overallRating: number;
      followUpRequired: boolean;
    }>;
    
    correctionActions: Array<{
      actionId: string;
      issueDescription: string;
      rootCause: string;
      correctionPlan: string;
      targetDate: Date;
      status: 'planned' | 'in_progress' | 'completed' | 'verified';
      verification: {
        verificationDate?: Date;
        verifiedBy?: string;
        verificationResult?: 'passed' | 'failed';
        comments?: string;
      };
    }>;
  };
  
  // åˆ›æ–°åä½œ
  innovationCollaboration: {
    newProductDevelopment: Array<{
      projectId: string;
      projectName: string;
      description: string;
      targetMarket: string;
      timeline: {
        startDate: Date;
        targetLaunch: Date;
        milestones: Array<{
          milestone: string;
          targetDate: Date;
          status: string;
        }>;
      };
      collaboration: {
        sharedInvestment: number;
        ipArrangement: string;
        exclusivityPeriod: number;
      };
    }>;
    
    processImprovement: Array<{
      improvementId: string;
      area: string;
      currentState: string;
      proposedImprovement: string;
      expectedBenefit: string;
      implementationPlan: string;
      status: 'proposed' | 'approved' | 'in_progress' | 'completed';
    }>;
  };
}
```

### 5. åŠ¨æ€æŠ¥ä»·ä¸ç«ä»·ç³»ç»Ÿ

#### 5.1 å®æ—¶æŠ¥ä»·ç³»ç»Ÿ
```typescript
interface DynamicPricingSystem {
  // å®æ—¶å¸‚åœºä»·æ ¼ç›‘æ§
  marketPriceMonitoring: {
    priceFeeds: Array<{
      sourceId: string;
      sourceName: string;
      updateFrequency: number; // åˆ†é’Ÿ
      reliability: number; // 0-1
      coverage: string[]; // äº§å“ç±»åˆ«
    }>;
    
    currentPrices: Array<{
      partNumber: string;
      partName: string;
      category: string;
      prices: Array<{
        source: string;
        price: number;
        currency: string;
        timestamp: Date;
        conditions: string;
      }>;
      marketTrend: 'rising' | 'stable' | 'falling';
      volatility: number; // ä»·æ ¼æ³¢åŠ¨ç‡
    }>;
  };
  
  // åŠ¨æ€å®šä»·ç®—æ³•
  dynamicPricingRules: {
    basePrice: number;
    adjustmentFactors: Array<{
      factor: string;
      weight: number;
      currentValue: number;
      adjustmentPercent: number;
    }>;
    
    demandFactors: {
      urgency: { urgent: 1.2, normal: 1.0, planned: 0.9 };
      quantity: { bulk: 0.95, standard: 1.0, small: 1.05 };
      seasonality: Record<string, number>;
      marketDemand: number; // å¸‚åœºéœ€æ±‚æŒ‡æ•°
    };
    
    supplyFactors: {
      availability: { abundant: 0.95, normal: 1.0, scarce: 1.15 };
      leadTime: { immediate: 1.1, standard: 1.0, extended: 0.95 };
      competition: number; // ç«äº‰å¼ºåº¦æŒ‡æ•°
    };
    
    relationshipFactors: {
      customerTier: { vip: 0.9, preferred: 0.95, standard: 1.0, new: 1.05 };
      paymentTerms: { immediate: 0.98, net30: 1.0, net60: 1.02 };
      orderHistory: number; // å†å²è®¢å•å½±å“ç³»æ•°
    };
  };
  
  // è‡ªåŠ¨æŠ¥ä»·ç”Ÿæˆ
  automaticQuoteGeneration: {
    triggers: string[]; // è§¦å‘æ¡ä»¶
    quoteValidityPeriod: number; // å°æ—¶
    autoApprovalThreshold: number; // è‡ªåŠ¨æ‰¹å‡†é‡‘é¢é˜ˆå€¼
    
    priceCalculation: {
      basePriceSource: 'catalog' | 'lastQuote' | 'marketPrice' | 'costPlus';
      marginSettings: {
        minimumMargin: number;
        targetMargin: number;
        maximumMargin: number;
      };
      discountRules: Array<{
        condition: string;
        discountPercent: number;
        maxDiscount: number;
      }>;
    };
  };
}
```

#### 5.2 ç«ä»·æ‹å–ç³»ç»Ÿ
```typescript
interface AuctionSystem {
  // æ‹å–é…ç½®
  auctionSetup: {
    auctionId: string;
    auctionTitle: string;
    auctionType: 'reverse' | 'forward' | 'sealed_bid' | 'dutch';
    
    itemDetails: {
      items: Array<{
        itemId: string;
        description: string;
        quantity: number;
        specifications: Record<string, any>;
        minimumQuality: string;
        deliveryRequirements: string;
      }>;
    };
    
    timeline: {
      registrationStart: Date;
      registrationEnd: Date;
      auctionStart: Date;
      auctionEnd: Date;
      resultAnnouncement: Date;
    };
    
    rules: {
      minimumBidIncrement: number;
      maximumBidAmount?: number;
      bidValidityPeriod: number; // åˆ†é’Ÿ
      allowBidWithdrawal: boolean;
      requireDeposit: boolean;
      depositAmount?: number;
    };
    
    participants: Array<{
      supplierId: string;
      registrationDate: Date;
      verificationStatus: 'pending' | 'verified' | 'rejected';
      depositPaid: boolean;
      qualificationScore: number;
    }>;
  };
  
  // ç«ä»·è¿‡ç¨‹
  biddingProcess: {
    currentRound: number;
    totalRounds: number;
    
    currentBids: Array<{
      bidId: string;
      supplierId: string;
      itemId: string;
      bidAmount: number;
      timestamp: Date;
      status: 'active' | 'outbid' | 'withdrawn';
      
      bidDetails: {
        unitPrice: number;
        totalPrice: number;
        deliveryTime: number;
        paymentTerms: string;
        additionalServices: string[];
        validUntil: Date;
      };
    }>;
    
    leadingBids: Array<{
      itemId: string;
      leadingSupplierId: string;
      leadingBid: number;
      secondBestBid: number;
      timeRemaining: number; // ç§’
    }>;
    
    biddingHistory: Array<{
      bidId: string;
      supplierId: string;
      itemId: string;
      bidAmount: number;
      timestamp: Date;
      roundNumber: number;
    }>;
  };
  
  // è¯„æ ‡ç³»ç»Ÿ
  bidEvaluation: {
    evaluationCriteria: Array<{
      criterion: string;
      weight: number;
      description: string;
      evaluationMethod: 'price' | 'score' | 'rank';
    }>;
    
    technicalEvaluation: Array<{
      supplierId: string;
      itemId: string;
      scores: Record<string, number>;
      overallTechnicalScore: number;
      technicalRank: number;
      comments: string;
    }>;
    
    commercialEvaluation: Array<{
      supplierId: string;
      itemId: string;
      normalizedPrice: number;
      priceScore: number;
      paymentTermsScore: number;
      deliveryScore: number;
      overallCommercialScore: number;
    }>;
    
    combinedEvaluation: Array<{
      supplierId: string;
      itemId: string;
      technicalScore: number;
      commercialScore: number;
      combinedScore: number;
      finalRank: number;
      recommendation: 'award' | 'consider' | 'reject';
    }>;
  };
  
  // ç»“æœå…¬å¸ƒ
  auctionResults: {
    winners: Array<{
      itemId: string;
      winningSupplierId: string;
      winningBid: number;
      awardReason: string;
      contractValue: number;
    }>;
    
    notifications: Array<{
      supplierId: string;
      result: 'won' | 'lost';
      feedback: string;
      nextSteps: string;
    }>;
    
    contractGeneration: {
      contractTemplateId: string;
      autoGenerateContract: boolean;
      contractReviewRequired: boolean;
      signatureMethod: 'electronic' | 'physical' | 'hybrid';
    };
  };
}
```

### 6. ä¾›åº”å•†ç»©æ•ˆç®¡ç†ç³»ç»Ÿ

#### 6.1 å®æ—¶ç»©æ•ˆç›‘æ§
```typescript
interface SupplierPerformanceMonitoring {
  // å®æ—¶KPIç›‘æ§
  realTimeKPIs: {
    deliveryPerformance: {
      onTimeDeliveryRate: number; // å‡†æ—¶äº¤ä»˜ç‡
      averageDeliveryDelay: number; // å¹³å‡å»¶è¿Ÿå¤©æ•°
      expediteRequestRate: number; // åŠ æ€¥è¯·æ±‚ç‡
      deliveryPromiseAccuracy: number; // äº¤ä»˜æ‰¿è¯ºå‡†ç¡®ç‡
    };
    
    qualityPerformance: {
      defectRate: number; // ç¼ºé™·ç‡
      firstPassYield: number; // ä¸€æ¬¡é€šè¿‡ç‡
      returnRate: number; // é€€è´§ç‡
      customerComplaintRate: number; // å®¢æˆ·æŠ•è¯‰ç‡
      correctionActionEffectiveness: number; // çº æ­£æªæ–½æœ‰æ•ˆæ€§
    };
    
    commercialPerformance: {
      priceCompetitiveness: number; // ä»·æ ¼ç«äº‰åŠ›
      costReductionContribution: number; // æˆæœ¬é™ä½è´¡çŒ®
      invoiceAccuracy: number; // å‘ç¥¨å‡†ç¡®ç‡
      paymentTermsCompliance: number; // ä»˜æ¬¾æ¡æ¬¾éµå®ˆç‡
    };
    
    servicePerformance: {
      responseTime: number; // å“åº”æ—¶é—´ï¼ˆå°æ—¶ï¼‰
      communicationEffectiveness: number; // æ²Ÿé€šæœ‰æ•ˆæ€§
      problemResolutionTime: number; // é—®é¢˜è§£å†³æ—¶é—´
      technicalSupportQuality: number; // æŠ€æœ¯æ”¯æŒè´¨é‡
    };
    
    relationshipPerformance: {
      collaborationLevel: number; // åä½œæ°´å¹³
      innovationContribution: number; // åˆ›æ–°è´¡çŒ®
      flexibilityAdaptability: number; // çµæ´»æ€§é€‚åº”æ€§
      strategicAlignment: number; // æˆ˜ç•¥ä¸€è‡´æ€§
    };
  };
  
  // é¢„è­¦ç³»ç»Ÿ
  alertSystem: {
    thresholds: {
      critical: { onTimeDelivery: 80, defectRate: 5, responseTime: 24 };
      warning: { onTimeDelivery: 90, defectRate: 2, responseTime: 12 };
      target: { onTimeDelivery: 98, defectRate: 0.5, responseTime: 4 };
    };
    
    activeAlerts: Array<{
      alertId: string;
      supplierId: string;
      alertType: 'critical' | 'warning' | 'information';
      metric: string;
      currentValue: number;
      thresholdValue: number;
      trend: 'improving' | 'stable' | 'declining';
      triggeredAt: Date;
      status: 'new' | 'acknowledged' | 'investigating' | 'resolved';
      assignedTo?: string;
      actionPlan?: string;
    }>;
    
    escalationRules: Array<{
      alertType: string;
      timeToEscalate: number; // å°æ—¶
      escalationLevel: 'supervisor' | 'manager' | 'director';
      autoActions: string[];
    }>;
  };
  
  // è¶‹åŠ¿åˆ†æ
  trendAnalysis: {
    performanceTrends: Array<{
      supplierId: string;
      metric: string;
      timeFrame: '1M' | '3M' | '6M' | '1Y';
      trendDirection: 'improving' | 'stable' | 'declining';
      changeRate: number; // å˜åŒ–ç‡
      seasonalPattern: boolean;
      forecast: Array<{
        period: string;
        predictedValue: number;
        confidence: number;
      }>;
    }>;
    
    benchmarking: Array<{
      supplierId: string;
      metric: string;
      supplierValue: number;
      industryAverage: number;
      topQuartile: number;
      ranking: number;
      improvementPotential: number;
    }>;
  };
}
```

#### 6.2 ä¾›åº”å•†è¯„çº§ç³»ç»Ÿ
```typescript
interface SupplierRatingSystem {
  // è¯„çº§æ¨¡å‹
  ratingModel: {
    weightingSchema: {
      delivery: number; // 30%
      quality: number; // 30%
      commercial: number; // 20%
      service: number; // 15%
      relationship: number; // 5%
    };
    
    scoringMethod: {
      scoreRange: { min: 0, max: 100 };
      ratingLevels: {
        excellent: { min: 90, color: 'green', actions: ['preferred_supplier', 'strategic_partnership'] };
        good: { min: 80, color: 'lightgreen', actions: ['standard_supplier', 'development_opportunities'] };
        acceptable: { min: 70, color: 'yellow', actions: ['conditional_supplier', 'improvement_plan'] };
        poor: { min: 60, color: 'orange', actions: ['probation', 'intensive_monitoring'] };
        unacceptable: { min: 0, color: 'red', actions: ['termination', 'immediate_replacement'] };
      };
    };
    
    evaluationFrequency: {
      formal: 'quarterly'; // æ­£å¼è¯„ä¼°
      informal: 'monthly'; // éæ­£å¼è¯„ä¼°
      adhoc: 'as_needed'; // ä¸´æ—¶è¯„ä¼°
    };
  };
  
  // è¯„ä¼°æµç¨‹
  evaluationProcess: {
    evaluationCycle: Array<{
      phase: string;
      duration: number; // å¤©æ•°
      participants: string[];
      activities: string[];
      deliverables: string[];
    }>;
    
    dataCollection: {
      automaticMetrics: string[]; // è‡ªåŠ¨æ”¶é›†çš„æŒ‡æ ‡
      manualInputs: string[]; // æ‰‹å·¥è¾“å…¥çš„è¯„ä¼°
      stakeholderFeedback: Array<{
        stakeholder: string;
        feedbackType: 'survey' | 'interview' | 'observation';
        weight: number;
      }>;
    };
    
    reviewProcess: {
      selfAssessment: boolean; // ä¾›åº”å•†è‡ªè¯„
      crossFunctionalReview: boolean; // è·¨éƒ¨é—¨è¯„å®¡
      customerInput: boolean; // å®¢æˆ·åé¦ˆ
      finalReview: {
        reviewers: string[];
        consensus: boolean;
        appealProcess: boolean;
      };
    };
  };
  
  // è¯„ä¼°ç»“æœ
  evaluationResults: Array<{
    evaluationId: string;
    supplierId: string;
    evaluationPeriod: { start: Date; end: Date };
    evaluationType: 'quarterly' | 'annual' | 'special';
    
    categoryScores: {
      delivery: number;
      quality: number;
      commercial: number;
      service: number;
      relationship: number;
    };
    
    overallScore: number;
    previousScore?: number;
    scoreChange: number;
    rating: 'excellent' | 'good' | 'acceptable' | 'poor' | 'unacceptable';
    previousRating?: string;
    
    strengths: string[];
    weaknesses: string[];
    opportunities: string[];
    threats: string[];
    
    actionPlan: Array<{
      area: string;
      action: string;
      timeline: string;
      responsibility: string;
      success_criteria: string;
    }>;
    
    nextEvaluationDate: Date;
    reviewMeeting: {
      scheduled: boolean;
      date?: Date;
      participants: string[];
      agenda: string[];
    };
  }>;
}
```

## ğŸ”§ æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 1. æ•°æ®åº“æ‰©å±•è®¾è®¡

```sql
-- ä¾›åº”å•†è¯¢ä»·è¡¨
CREATE TABLE supplier_rfqs (
    id VARCHAR(36) PRIMARY KEY,
    rfq_number VARCHAR(50) UNIQUE NOT NULL,
    order_id VARCHAR(36) REFERENCES orders(id),
    title VARCHAR(200) NOT NULL,
    description TEXT,
    issue_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    response_deadline TIMESTAMP NOT NULL,
    validity_period INTEGER DEFAULT 30,
    status ENUM('draft', 'sent', 'responses_received', 'evaluated', 'awarded', 'cancelled') DEFAULT 'draft',
    created_by VARCHAR(36) REFERENCES users(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- è¯¢ä»·é¡¹ç›®è¡¨
CREATE TABLE rfq_items (
    id VARCHAR(36) PRIMARY KEY,
    rfq_id VARCHAR(36) REFERENCES supplier_rfqs(id) ON DELETE CASCADE,
    inventory_id VARCHAR(36) REFERENCES inventory(id),
    item_name VARCHAR(200) NOT NULL,
    part_number VARCHAR(100),
    description TEXT,
    quantity INTEGER NOT NULL,
    specifications JSON,
    quality_requirement VARCHAR(50),
    delivery_date TIMESTAMP,
    urgency ENUM('low', 'normal', 'high', 'critical') DEFAULT 'normal'
);

-- ä¾›åº”å•†æŠ¥ä»·è¡¨
CREATE TABLE supplier_quotes (
    id VARCHAR(36) PRIMARY KEY,
    rfq_id VARCHAR(36) REFERENCES supplier_rfqs(id),
    supplier_id VARCHAR(36) REFERENCES suppliers(id),
    quote_number VARCHAR(50),
    submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status ENUM('submitted', 'under_review', 'accepted', 'rejected', 'negotiating') DEFAULT 'submitted',
    total_value DECIMAL(15,2),
    currency VARCHAR(3) DEFAULT 'CNY',
    validity_until TIMESTAMP,
    terms_conditions TEXT,
    notes TEXT
);

-- æŠ¥ä»·é¡¹ç›®æ˜ç»†è¡¨
CREATE TABLE quote_items (
    id VARCHAR(36) PRIMARY KEY,
    quote_id VARCHAR(36) REFERENCES supplier_quotes(id) ON DELETE CASCADE,
    rfq_item_id VARCHAR(36) REFERENCES rfq_items(id),
    quoted_part_name VARCHAR(200),
    quoted_part_number VARCHAR(100),
    brand VARCHAR(100),
    quantity INTEGER,
    unit_price DECIMAL(10,2),
    total_price DECIMAL(15,2),
    lead_time INTEGER, -- å¤©æ•°
    warranty_period INTEGER, -- æœˆæ•°
    specifications JSON
);

-- é‡‡è´­è®¢å•è¡¨
CREATE TABLE purchase_orders (
    id VARCHAR(36) PRIMARY KEY,
    po_number VARCHAR(50) UNIQUE NOT NULL,
    rfq_id VARCHAR(36) REFERENCES supplier_rfqs(id),
    supplier_id VARCHAR(36) REFERENCES suppliers(id),
    order_id VARCHAR(36) REFERENCES orders(id), -- å…³è”åŸå§‹ç»´ä¿®è®¢å•
    status ENUM('draft', 'pending_approval', 'approved', 'sent', 'acknowledged', 'in_production', 'shipped', 'delivered', 'completed', 'cancelled') DEFAULT 'draft',
    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    expected_delivery TIMESTAMP,
    actual_delivery TIMESTAMP,
    total_value DECIMAL(15,2),
    currency VARCHAR(3) DEFAULT 'CNY',
    payment_terms VARCHAR(100),
    delivery_terms VARCHAR(100),
    created_by VARCHAR(36) REFERENCES users(id),
    approved_by VARCHAR(36) REFERENCES users(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- é‡‡è´­è®¢å•é¡¹ç›®è¡¨
CREATE TABLE purchase_order_items (
    id VARCHAR(36) PRIMARY KEY,
    po_id VARCHAR(36) REFERENCES purchase_orders(id) ON DELETE CASCADE,
    quote_item_id VARCHAR(36) REFERENCES quote_items(id),
    inventory_id VARCHAR(36) REFERENCES inventory(id),
    part_name VARCHAR(200),
    part_number VARCHAR(100),
    quantity INTEGER,
    unit_price DECIMAL(10,2),
    total_price DECIMAL(15,2),
    requested_delivery TIMESTAMP,
    confirmed_delivery TIMESTAMP,
    actual_delivery TIMESTAMP,
    status ENUM('pending', 'confirmed', 'in_production', 'shipped', 'delivered', 'accepted', 'rejected') DEFAULT 'pending'
);

-- ä¾›åº”å•†ç»©æ•ˆè¯„ä¼°è¡¨
CREATE TABLE supplier_performance (
    id VARCHAR(36) PRIMARY KEY,
    supplier_id VARCHAR(36) REFERENCES suppliers(id),
    evaluation_period_start DATE,
    evaluation_period_end DATE,
    delivery_score DECIMAL(5,2),
    quality_score DECIMAL(5,2),
    commercial_score DECIMAL(5,2),
    service_score DECIMAL(5,2),
    relationship_score DECIMAL(5,2),
    overall_score DECIMAL(5,2),
    rating ENUM('excellent', 'good', 'acceptable', 'poor', 'unacceptable'),
    evaluator VARCHAR(36) REFERENCES users(id),
    evaluation_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    comments TEXT,
    action_plan JSON
);

-- ä¾›åº”å•†ä»·æ ¼å†å²è¡¨
CREATE TABLE supplier_price_history (
    id VARCHAR(36) PRIMARY KEY,
    supplier_id VARCHAR(36) REFERENCES suppliers(id),
    inventory_id VARCHAR(36) REFERENCES inventory(id),
    price DECIMAL(10,2),
    currency VARCHAR(3) DEFAULT 'CNY',
    effective_date TIMESTAMP,
    end_date TIMESTAMP,
    quote_id VARCHAR(36) REFERENCES supplier_quotes(id),
    volume_threshold INTEGER,
    notes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 2. APIæ¥å£å®ç°ç¤ºä¾‹

```typescript
// å¤šä¾›åº”å•†è¯¢ä»·API
export class MultiSupplierRFQAPI {
  // åˆ›å»ºè¯¢ä»·è¯·æ±‚
  async createRFQ(rfqData: RFQRequest): Promise<RFQResponse> {
    const transaction = await db.beginTransaction();
    
    try {
      // 1. åˆ›å»ºRFQè®°å½•
      const rfq = await db.supplier_rfqs.create({
        ...rfqData.basicInfo,
        order_id: rfqData.orderId,
        created_by: rfqData.createdBy
      }, { transaction });
      
      // 2. åˆ›å»ºRFQé¡¹ç›®
      for (const item of rfqData.items) {
        await db.rfq_items.create({
          rfq_id: rfq.id,
          ...item
        }, { transaction });
      }
      
      // 3. å‘é€è¯¢ä»·é‚€è¯·ç»™ç›®æ ‡ä¾›åº”å•†
      for (const supplier of rfqData.targetSuppliers) {
        await this.sendRFQInvitation(rfq.id, supplier);
      }
      
      await transaction.commit();
      
      // 4. è§¦å‘åç»­äº‹ä»¶
      await eventBus.emit('rfq.created', { rfqId: rfq.id });
      
      return { success: true, rfqId: rfq.id };
    } catch (error) {
      await transaction.rollback();
      throw error;
    }
  }
  
  // ä¾›åº”å•†æäº¤æŠ¥ä»·
  async submitQuote(quoteData: RFQResponse): Promise<QuoteSubmissionResult> {
    const transaction = await db.beginTransaction();
    
    try {
      // 1. éªŒè¯RFQæœ‰æ•ˆæ€§
      const rfq = await db.supplier_rfqs.findByPk(quoteData.rfqId);
      if (!rfq || rfq.status !== 'sent' || new Date() > rfq.response_deadline) {
        throw new Error('RFQä¸å¯ç”¨æˆ–å·²è¿‡æœŸ');
      }
      
      // 2. åˆ›å»ºæŠ¥ä»·è®°å½•
      const quote = await db.supplier_quotes.create({
        rfq_id: quoteData.rfqId,
        supplier_id: quoteData.supplierId,
        quote_number: this.generateQuoteNumber(),
        total_value: quoteData.quotation.grandTotal,
        validity_until: quoteData.commercialTerms.priceValidityPeriod,
        terms_conditions: JSON.stringify(quoteData.commercialTerms)
      }, { transaction });
      
      // 3. åˆ›å»ºæŠ¥ä»·é¡¹ç›®æ˜ç»†
      for (const item of quoteData.quotation.items) {
        await db.quote_items.create({
          quote_id: quote.id,
          rfq_item_id: item.itemId,
          quoted_part_name: item.quotedPart.partName,
          quoted_part_number: item.quotedPart.partNumber,
          brand: item.quotedPart.brand,
          quantity: item.pricing.quantity,
          unit_price: item.pricing.unitPrice,
          total_price: item.pricing.totalPrice,
          lead_time: item.delivery.leadTime,
          warranty_period: item.warranty.period
        }, { transaction });
      }
      
      await transaction.commit();
      
      // 4. é€šçŸ¥ç›¸å…³äººå‘˜
      await this.notifyQuoteReceived(quote.id);
      
      return { success: true, quoteId: quote.id };
    } catch (error) {
      await transaction.rollback();
      throw error;
    }
  }
  
  // ä»·æ ¼å¯¹æ¯”åˆ†æ
  async performPriceComparison(rfqId: string): Promise<SupplierComparison> {
    // 1. è·å–æ‰€æœ‰æŠ¥ä»·
    const quotes = await db.supplier_quotes.findAll({
      where: { rfq_id: rfqId, status: 'submitted' },
      include: [
        { model: db.suppliers },
        { model: db.quote_items }
      ]
    });
    
    if (quotes.length === 0) {
      throw new Error('æ²¡æœ‰å¯ç”¨çš„æŠ¥ä»·è¿›è¡Œå¯¹æ¯”');
    }
    
    // 2. ä»·æ ¼å¯¹æ¯”åˆ†æ
    const priceComparison = this.analyzePrices(quotes);
    
    // 3. äº¤ä»˜å¯¹æ¯”åˆ†æ
    const deliveryComparison = this.analyzeDelivery(quotes);
    
    // 4. è´¨é‡å¯¹æ¯”åˆ†æ
    const qualityComparison = await this.analyzeQuality(quotes);
    
    // 5. å•†åŠ¡æ¡æ¬¾å¯¹æ¯”
    const commercialComparison = this.analyzeCommercialTerms(quotes);
    
    // 6. ç»¼åˆè¯„åˆ†å’Œæ’å
    const overallRanking = this.calculateOverallRanking(
      quotes, 
      priceComparison, 
      deliveryComparison, 
      qualityComparison, 
      commercialComparison
    );
    
    return {
      rfqId,
      comparisonDate: new Date(),
      priceComparison,
      deliveryComparison,
      qualityComparison,
      commercialComparison,
      overallRanking
    };
  }
  
  // æ™ºèƒ½é‡‡è´­å†³ç­–
  async generatePurchaseRecommendation(rfqId: string): Promise<PurchaseRecommendation> {
    // 1. è·å–ä»·æ ¼å¯¹æ¯”ç»“æœ
    const comparison = await this.performPriceComparison(rfqId);
    
    // 2. åº”ç”¨å†³ç­–å¼•æ“
    const decisionEngine = await this.getDecisionEngine();
    
    // 3. é£é™©è¯„ä¼°
    const riskAssessment = await this.assessRisks(comparison);
    
    // 4. ç”Ÿæˆæ¨èæ–¹æ¡ˆ
    const recommendation = this.generateRecommendation(
      comparison, 
      decisionEngine, 
      riskAssessment
    );
    
    // 5. æ£€æŸ¥æ˜¯å¦éœ€è¦äººå·¥å®¡æ ¸
    const manualReviewRequired = this.checkManualReviewRequirement(recommendation);
    
    return {
      ...recommendation,
      manualReviewRequired
    };
  }
}
```

è¿™ä¸ªè¯¦ç»†çš„è®¢å•ç®¡ç†ä¸ä¾›åº”å•†é›†æˆæ–¹æ¡ˆå®ç°äº†æ‚¨è¦æ±‚çš„æ ¸å¿ƒåŠŸèƒ½ï¼š

âœ… **å¤šä¾›åº”å•†è¯¢ä»·ç³»ç»Ÿ** - è‡ªåŠ¨å‘é€è¯¢ä»·ï¼Œæ”¶é›†å¤šå®¶æŠ¥ä»·  
âœ… **ä»·æ ¼å¯¹æ¯”åˆ†æ** - å…¨æ–¹ä½çš„ä»·æ ¼ã€äº¤ä»˜ã€è´¨é‡å¯¹æ¯”  
âœ… **æ™ºèƒ½é‡‡è´­å†³ç­–** - åŸºäºç®—æ³•çš„æœ€ä¼˜ä¾›åº”å•†æ¨è  
âœ… **ä¾›åº”å•†åä½œå¹³å°** - å®æ—¶åä½œå’Œç»©æ•ˆç®¡ç†  
âœ… **åŠ¨æ€æŠ¥ä»·ç«ä»·** - å®æ—¶æŠ¥ä»·å’Œæ‹å–æœºåˆ¶  

è¿™å¥—ç³»ç»Ÿä¸ç°æœ‰çš„è®¢å•ç®¡ç†ç³»ç»Ÿå®Œå…¨äº’é€šï¼Œå½“ç»´ä¿®è®¢å•éœ€è¦é…ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘ä¾›åº”å•†è¯¢ä»·æµç¨‹ï¼Œé€šè¿‡æ™ºèƒ½å¯¹æ¯”é€‰æ‹©æœ€ä¼˜ä¾›åº”å•†ï¼Œç¡®ä¿ç»´ä¿®è®¢å•èƒ½å¤Ÿé«˜æ•ˆå®Œæˆã€‚

æ‚¨å¸Œæœ›æˆ‘è¿›ä¸€æ­¥è¯¦ç»†è®¾è®¡å“ªä¸ªå…·ä½“åŠŸèƒ½æ¨¡å—ï¼Ÿ